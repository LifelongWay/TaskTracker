{% extends 'layout.html' %}

{% block title %}
  {{ list.name }}
{% endblock %}

{% block content %}
<div class="container max-width-600 mt-5">
  <h1 class="page-title mb-5 text-center text-primary fw-bold">{{ list.name }}</h1>
  
  {% if list.tasks.all %}
  <ul class="list-group shadow-sm rounded-4 overflow-hidden">
    {% for task in list.tasks.all %}
    <li class="list-group-item transition-hover d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3 p-4 mb-3 rounded-4"
        style="background: #f8f9fa; box-shadow: 0 4px 12px rgba(0,0,0,0.06);">

      <div class="flex-grow-1">
        <h4 class="mb-2 text-truncate fw-semibold text-dark">{{ task.title }}</h4>
        <p class="mb-3 text-secondary">{{ task.description }}</p>
        <div class="small text-muted d-flex flex-wrap gap-3">
          <div><strong>Updated:</strong> {{ task.updated_at|date:"M d, Y H:i" }}</div>
          <div><strong>Due:</strong> {{ task.due_date|date:"M d, Y" }}</div>
          <div><strong>Difficulty:</strong> {{ task.difficulty|title }}</div>
        </div>
      </div>

      <div class="d-flex flex-column align-items-center gap-2">
        <span class="badge fs-6 px-3 py-2
          {% if task.priority == 'high' %}bg-danger
          {% elif task.priority == 'medium' %}bg-warning text-dark
          {% else %}bg-secondary
          {% endif %} rounded-pill text-uppercase shadow-sm text-center"
          style="min-width: 90px;">
          {{ task.priority }}
        </span>

        <!-- Remove Button -->
        <form method="post" action="{% url 'tasks:remove-task' list_id=list.id task_id=task.id %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-sm btn-outline-danger" title="Remove task">
            &times; Remove
          </button>
        </form>
      </div>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p class="text-center text-muted fs-5 mt-5">No tasks in this list yet.</p>
  {% endif %}
</div>
{% endblock %}
